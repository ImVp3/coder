<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}">
</head>
<body>
    <h1>Code Assistant</h1>

    <div class="tabs">
        <button class="tab-button active" onclick="openTab(event, 'chat-tab')">Chat</button>
        <button class="tab-button" onclick="openTab(event, 'documents-tab')">Documents</button>
    </div>

    <!-- Chat Tab -->
    <div id="chat-tab" class="tab-content" style="display: block;">
        <h2>Chat</h2>
        <div class="chat-container">
            <div id="chat-box" class="chat-box">
                <!-- Chat messages will appear here -->
            </div>
            <div id="chat-status" class="chat-status">
                Current Flow: <span id="flow-status">Idle</span>
            </div>
            <div class="chat-input-area">
                <textarea id="chat-input" placeholder="Enter your message..." rows="3"></textarea>
                <button id="send-button">Send</button>
                <button id="clear-button">Clear Chat</button>
            </div>
        </div>
        <div class="sidebar">
            <h3>Settings</h3>
            <div class="setting-item">
                <label for="model-select">Model:</label>
                <select id="model-select">
                    <option value="gemini-2.0-flash">gemini-2.0-flash</option>
                    <option value="gemini-2.0-flash-lite" selected>gemini-2.0-flash-lite</option>
                    <!-- Add other models if needed -->
                </select>
            </div>
            <div class="setting-item">
                <label for="temperature-slider">Temperature: <span id="temperature-value">0.0</span></label>
                <input type="range" id="temperature-slider" min="0.0" max="1.0" step="0.1" value="0.0">
            </div>
            <div class="setting-item">
                <label for="max-iterations-slider">Max Iterations: <span id="max-iterations-value">3</span></label>
                <input type="range" id="max-iterations-slider" min="1" max="10" step="1" value="3">
            </div>
            <div class="setting-item">
                <label for="reflect-checkbox">Reflect:</label>
                <input type="checkbox" id="reflect-checkbox" checked>
            </div>
             <div class="setting-item">
                <label for="framework-input">Framework:</label>
                <input type="text" id="framework-input" placeholder="Enter the framework">
            </div>
            <button id="save-settings-button">Save Settings</button>
            <div id="settings-status" class="status-message"></div>
        </div>
    </div>

    <!-- Documents Tab -->
    <div id="documents-tab" class="tab-content">
        <h2>Documents Management</h2>
        <div class="documents-container">
            <div class="documents-actions">
                <div class="upload-section">
                    <h4>Upload by URL</h4>
                    <input type="url" id="url-input" placeholder="https://example.com/docs/">
                    <label for="max-depth-slider">Max Depth: <span id="max-depth-value">2</span></label>
                    <input type="range" id="max-depth-slider" min="0" max="10" step="1" value="2">
                    <button id="upload-url-button">Load from URL</button>
                </div>
                 <hr>
                <div class="upload-section">
                    <h4>Upload Files</h4>
                    <input type="file" id="file-input" multiple accept=".pdf,.txt,.md">
                    <button id="upload-files-button">Upload Files</button>
                </div>
                <div id="upload-status" class="status-message"></div>
                <hr>
                 <div class="delete-section">
                    <h4>Delete Source</h4>
                    <input type="text" id="delete-source-input" placeholder="Enter source name to delete">
                    <button id="delete-source-button">Delete Source</button>
                     <div id="delete-status" class="status-message"></div>
                </div>
            </div>
            <div class="documents-list">
                <h3>Sources</h3>
                <ul id="source-list">
                    <!-- Source list will be loaded here -->
                    <li>Loading sources...</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', path='/js/script.js') }}"></script>
</body>
</html>
